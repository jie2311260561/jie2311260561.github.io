---
layout: post
title:  "nezha 中的模型部署之 模型转换"
date:   2021-08-3 10:04
categories: Pycham
tags: torch onnx python
excerpt: 把模型部署在哪吒上的第一步之模型转换
---


This is also resolved in coremltools@4.1 for torch 1.8

这也在 coremltools 4.1 和 torch 1.8 的版本中得到解决  尝试中。。。。



这里需要提醒一下大家，上述的导出操作在pytorch1.7和yolov5 v4.0版本上会报错，我这里的环境是pytorch1.6、yolov5 3.0版本。报错信息如下


只能明天安装一下旧的环境然后用旧的环境再试试了。。。。 最新的 还是不要尝试了  fo了


后面模型训练的相关任务基本是已经通了  转换的第一步不成功是因为是最新的yolo 中间没有带转换的方法 所以我移动过来的方法是不行的
***解决方法*** 下载了 Relase 版本的 Yolo，使用 其中的 Weidget 中的 module 转化工具  可以转化成ONNX！！！

直接转化后的模型不能使用 ncnn 来进行转换，因为中间会出现  出了输入输出 意外的其他错误  所以得使用  onnx 来进行模型优化  


模型优化的过程中  一定不能出现错误   模型转化的过程中可能出现 错误  但是不报错！！！

然后就会让你觉得你没有问题。然后最后就会不成功。

最后在模型部署转换的过程中 就会出现错误。。

正确的流程一定要对。。。。。至于什么是对的  应该是按照ncnn的教程    尽管我不明白为什么会这样

总而言之，模型转换的过程是比较顺利的，希望自己可以成功！


